{
  "kind": "build_request",
  "title": "Align React frontend generation flow with provided final index.html (style picker, status text, download PNG)",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Update the Art Style dropdown to match the provided final HTML options/labels: render a select with id \"styleSelect\" and options that submit these exact values: \"3D Pixar\", \"Cyberpunk Neon\", \"Pencil Sketch\", \"Renaissance Oil\"; and display option text as \"3D Pixar Mode\", \"Cyberpunk Neon\", \"Pencil Sketch\", \"Oil Painting\" respectively.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "<select id=\"styleSelect\">",
          "<option value=\"3D Pixar\">3D Pixar Mode</option>",
          "<option value=\"Cyberpunk Neon\">Cyberpunk Neon</option>",
          "<option value=\"Pencil Sketch\">Pencil Sketch</option>",
          "<option value=\"Renaissance Oil\">Oil Painting</option>"
        ]
      },
      "acceptanceCriteria": [
        "The style select element in the React UI has id=\"styleSelect\".",
        "Selecting each option results in the style value sent to the generation request being exactly one of: \"3D Pixar\", \"Cyberpunk Neon\", \"Pencil Sketch\", \"Renaissance Oil\".",
        "The visible option labels match exactly: \"3D Pixar Mode\", \"Cyberpunk Neon\", \"Pencil Sketch\", \"Oil Painting\"."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Update the generation UI behavior to match the provided final HTML: when the user clicks \"Generate My Caricature\", show inline status text \"Processing... (Please wait ~20s)\", clear any previously displayed output image, and hide the Download button until generation succeeds.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "status.innerText = \"Processing... (Please wait ~20s)\";",
          "output.src = \"\";",
          "dlBtn.style.display = \"none\";",
          "<button onclick=\"generate()\">Generate My Caricature</button>"
        ]
      },
      "acceptanceCriteria": [
        "On generate start, the UI shows \"Processing... (Please wait ~20s)\" exactly (English) in the status area.",
        "On generate start, any previously shown generated image preview is cleared.",
        "On generate start, the Download button is not visible."
      ]
    },
    {
      "id": "REQ-3",
      "text": "On successful generation, display inline status text \"Success!\" and show a \"Download PNG\" button that downloads the generated result using a timestamp-based filename in the format \"caricature_<timestamp>.png\".",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "status.innerText = \"Success!\";",
          "<button id=\"dlBtn\" style=\"display:none;\" onclick=\"downloadImage()\">Download PNG</button>",
          "link.download = `caricature_${Date.now()}.png`;"
        ]
      },
      "acceptanceCriteria": [
        "After a successful generation, the UI shows \"Success!\" exactly (English) in the status area.",
        "After a successful generation, a \"Download PNG\" button becomes visible.",
        "Clicking \"Download PNG\" downloads a PNG file named like \"caricature_<timestamp>.png\" (timestamp-based)."
      ]
    },
    {
      "id": "REQ-4",
      "text": "On generation failure, display an inline error message prefixed with \"Error: \" (in English) in the status area, and ensure the Download button remains hidden.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "} catch (err) {",
          "status.innerText = \"Error: \" + err.message;",
          "dlBtn.style.display = \"none\";"
        ]
      },
      "acceptanceCriteria": [
        "If the caricature API request fails, the status area displays text that starts with \"Error: \" followed by an error message.",
        "After a failed generation attempt, the Download button is not visible."
      ]
    }
  ],
  "constraints": [
    "Do not edit files in frontend immutablePaths (e.g., frontend/src/main.tsx, frontend/src/hooks/useInternetIdentity.ts(x), frontend/src/hooks/useActor.ts, frontend/src/components/ui).",
    "Keep the caricature API request as a multipart/form-data POST with fields named exactly \"image\" and \"style\".",
    "Use English for any newly introduced user-facing text tied to this change (status strings, button label), matching the provided final HTML text exactly where specified."
  ],
  "nonGoals": [
    "Do not implement or change backend caricature generation logic in Motoko as part of this request.",
    "Do not add new authentication providers or third-party integrations.",
    "Do not redesign unrelated screens (landing/auth/payment) beyond whatâ€™s necessary to match the requested generation/status/download behavior."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}